import{r as s,j as e}from"./index-BjVrarkX.js";import{P as j,G as m}from"./Piqiu3DRenderer-CPeq_kI_.js";function g({source:n}){const i=s.useRef(null),l=s.useRef(null),r=s.useRef(null),o=s.useRef(0);return s.useEffect(()=>{if(!i.current)return;const t=i.current;t.width=window.innerWidth*.5,t.height=window.innerHeight*.5;const d=new j(t,{width:t.width,height:t.height});return l.current=d,()=>{r.current&&(URL.revokeObjectURL(r.current),r.current=null);try{d.removeMouseEventListener(),d.dispose()}catch{}}},[]),s.useEffect(()=>{if(!l.current)return;let t;r.current&&(URL.revokeObjectURL(r.current),r.current=null),n?typeof n=="string"?t=n:(r.current=URL.createObjectURL(n),t=r.current):t="/models/bird.glb",(async()=>{const a=l.current,u=++o.current,f=new m;console.log("LoaderModel: start loading",t);try{const c=a.model;c&&typeof c.clear=="function"&&c.clear()}catch{}const h=await f.load(a.renderContext,t);if(u===o.current){for(const c of h)a.addPart(c);a.updateCamera()}})(),l.current.addGeneralEventListener()},[n]),e.jsx("div",{children:e.jsx("canvas",{ref:i,id:"demo"})})}function p(){const[n,i]=s.useState(null);function l(r){const o=r.target.files&&r.target.files[0];i(o||null)}return e.jsxs("div",{className:"basics-container",children:[e.jsx("h2",{className:"basics-title",children:"基础案例：加载gltf模型"}),e.jsx("div",{style:{marginBottom:12},children:e.jsxs("label",{children:["选择本地模型：",e.jsx("input",{type:"file",accept:".gltf,.glb,model/gltf+json,model/gltf-binary",onChange:l,style:{marginLeft:8}})]})}),e.jsx(g,{source:n}),e.jsxs("div",{className:"case-description",children:[e.jsx("p",{children:"这个案例展示了加载gltf模型功能。你可以通过鼠标进行交互："}),e.jsxs("ul",{children:[e.jsx("li",{children:"左键拖动：旋转视角"}),e.jsx("li",{children:"滚轮缩放：放大/缩小"}),e.jsx("li",{children:"右键拖动：平移场景"})]})]})]})}export{p as default};
